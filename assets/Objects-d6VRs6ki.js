import{_ as b,m as S,B,p as $,q as w,c as f,a as k,b as c,w as l,r as g,o as m,d as i,t as h,f as v,n as p,F as y,e as x,g as N,v as O,h as q,j as D}from"./index-CwzOiAex.js";const I={name:"objectCard",components:{BaseButton:B},directives:{lazyLoad:S},props:{objectName:{type:String,default:"Sample Object",required:!0},price:{type:String,default:"",required:!0},image:{type:String,default:"https://picsum.photos/800/600",required:!0},slug:{type:String,required:!0}}},z={class:"object-card"},L={class:"object-tags"};function V(d,e,n,o,r,_){const t=g("BaseButton"),a=w("lazy-load");return $((m(),f("div",z,[k("div",L,[c(t,{to:`/objects/${n.slug}`},{default:l(()=>[i(h(n.objectName),1)]),_:1},8,["to"]),c(t,{variant:"grey"},{default:l(()=>[i(h(n.price),1)]),_:1})])])),[[a,n.image]])}const A=b(I,[["render",V],["__scopeId","data-v-4f590ab0"]]),E={name:"FilterComponent",components:{BaseButton:B},emits:["filter-changed"],setup(d,{emit:e}){const n=v("all");return{activeFilter:n,setFilter:r=>{n.value=r,e("filter-changed",r)}}}},U={class:"filter-container"};function M(d,e,n,o,r,_){const t=g("BaseButton");return m(),f("div",U,[c(t,{class:p({active:o.activeFilter==="all"}),onClick:e[0]||(e[0]=a=>o.setFilter("all"))},{default:l(()=>e[4]||(e[4]=[i(" Show all ")])),_:1},8,["class"]),c(t,{class:p({active:o.activeFilter==="inStock"}),onClick:e[1]||(e[1]=a=>o.setFilter("inStock"))},{default:l(()=>e[5]||(e[5]=[i(" Only in stock ")])),_:1},8,["class"]),c(t,{class:p({active:o.activeFilter==="chronological"}),onClick:e[2]||(e[2]=a=>o.setFilter("chronological"))},{default:l(()=>e[6]||(e[6]=[i(" Chronological ")])),_:1},8,["class"]),c(t,{class:p({active:o.activeFilter==="alphabetical"}),onClick:e[3]||(e[3]=a=>o.setFilter("alphabetical"))},{default:l(()=>e[7]||(e[7]=[i(" A-Z ")])),_:1},8,["class"])])}const R=b(E,[["render",M],["__scopeId","data-v-13808abf"]]),T={name:"Objects",components:{ObjectCard:A,FilterComponent:R},setup(){const d=N(),e=v([]),n=v("all"),o=O(()=>{switch(n.value){case"inStock":return e.value.filter(t=>{var a;return(a=t.content)==null?void 0:a.in_stock});case"chronological":return[...e.value].sort((t,a)=>new Date(a.created_at)-new Date(t.created_at));case"alphabetical":return[...e.value].sort((t,a)=>{var s,u;return(((s=t.content)==null?void 0:s.title_tag)||"").localeCompare(((u=a.content)==null?void 0:u.title_tag)||"")});default:return e.value}}),r=t=>{n.value=t},_=t=>{if(console.log("Visual data:",t),!t||!t.filename)return"";const a=`${t.filename}/m/800x600`;return console.log("Formatted URL:",a),a};return q(async()=>{try{const t=await d.get("cdn/stories",{starts_with:"objects/",version:"published"});t.data&&t.data.stories&&(e.value=t.data.stories,console.log("Loaded stories:",e))}catch(t){console.error("Error fetching stories:",t)}}),{stories:e,filteredStories:o,formatImage:_,handleFilter:r}}},Z={class:"objects-container"},G={class:"objects-grid"};function H(d,e,n,o,r,_){const t=g("FilterComponent"),a=g("ObjectCard");return m(),f("div",Z,[c(t,{onFilterChanged:o.handleFilter},null,8,["onFilterChanged"]),k("div",G,[(m(!0),f(y,null,x(o.filteredStories,s=>{var u,F,j,C;return m(),D(a,{class:"object-card",key:s.id,image:(F=(u=s.content)==null?void 0:u.visuals)!=null&&F[0]?o.formatImage(s.content.visuals[0]):"",objectName:((j=s.content)==null?void 0:j.title_tag)||"",price:((C=s.content)==null?void 0:C.price_tag)||"",slug:s.slug},null,8,["image","objectName","price","slug"])}),128))])])}const K=b(T,[["render",H],["__scopeId","data-v-9d9edded"]]);export{K as default};
